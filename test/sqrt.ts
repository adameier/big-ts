import * as assert from 'assert'
import { sqrt, RoundingOptions, parse, toString } from '../src/Big'
import { pipe } from 'fp-ts/lib/function'

function testSqrt(expectedResult: string, x: string | number, ro: RoundingOptions) {
  it(`Big.js test: sqrt of ${x} rounded to ${ro.dp} places using RoundingMode ${ro.rm}`, () => {
    assert.strictEqual(pipe(parse(x), sqrt(ro), toString), expectedResult)
  })
}

describe('sqrt', () => {
  testSqrt('10', '101', { dp: 0, rm: 0 })

  testSqrt('10', '111', { dp: 0, rm: 0 })

  testSqrt('999', '999000.25', { dp: 0, rm: 0 })

  testSqrt('0', '0.25', { dp: 0, rm: 0 })

  testSqrt('44.40502294864850084', '1971.80606307', { dp: 17, rm: 1 })

  testSqrt(
    '14192376.643123461322847366137186892667087869800484670508360531721790645551341594437545247745705539930735',
    '201423554780276.3686384009255372',
    { dp: 97, rm: 0 }
  )

  testSqrt('2553252336.0331', '6519097491458426345.3554782053764871036657698339691144086', {
    dp: 4,
    rm: 1
  })

  testSqrt('62.30949119560079364913', '3882.4726930546528212066', {
    dp: 20,
    rm: 1
  })

  testSqrt(
    '174228234.709795821707519878032640346805381350977820681861118903584344693715322225768054125',
    '30355477770091701.53717021425249799086667828628302277998976752563',
    { dp: 82, rm: 1 }
  )

  testSqrt(
    '163256493.009563679477426538597267934928790668772138046453329418',
    '26652682509781714.54341292267818515442604',
    { dp: 54, rm: 2 }
  )

  testSqrt(
    '6413898755.503103237879757203310804711689478588298288050385897319721',
    '41138097245844256487.4',
    { dp: 57, rm: 2 }
  )

  testSqrt('651.83586891179899229526795359574620017366743', '424890', {
    dp: 41,
    rm: 1
  })

  testSqrt(
    '3.1691816831920187703897673787206897581382652839389771357354751032132',
    '10.043712541079797228859738302727066114683041689841812835450076520',
    { dp: 67, rm: 0 }
  )

  testSqrt(
    '118594.4273063315320244062844564170472198563498805200012242127200252960812599679770627273052218882949925',
    '14064638188.1167541187722341530354253926613230053009933342',
    { dp: 97, rm: 2 }
  )

  testSqrt('5248173.56787', '27543325798538.753780506094441280733789361778933753426582596791104', {
    dp: 5,
    rm: 1
  })

  testSqrt('6.05855328019481326674235', '36.7060678489593315124567', {
    dp: 23,
    rm: 2
  })

  testSqrt(
    '164207.20075782859923311531097410558094817321169039986325465336651402772907533144002814794168144323',
    '26964004780.7218252942882108',
    { dp: 93, rm: 2 }
  )

  testSqrt(
    '2.723397260313830449769700482256736114679660269490922765',
    '7.4168926374848775741132294',
    { dp: 54, rm: 2 }
  )

  testSqrt(
    '145626737347.699863159799647089039014085200730659988131836086866937945539247414906654868',
    '21207146630535962175511.4592',
    { dp: 75, rm: 2 }
  )

  testSqrt(
    '15625591.477694858909123645800863577029584072458683168542082897370551849161553',
    '244159109027810.20442572274363387',
    { dp: 69, rm: 0 }
  )

  testSqrt(
    '85762713.1327157666976061',
    '7355242963884497.437336977648000579022368327415840055129120741942567239',
    { dp: 16, rm: 0 }
  )

  testSqrt('74629.64', '5569583803.0907402', { dp: 2, rm: 0 })

  testSqrt(
    '44.05501263636205450407476438041804283847324427155286698836103844',
    '1940.8441383900203',
    { dp: 62, rm: 2 }
  )

  testSqrt('1119.912102354466031064620923', '1254203.117', { dp: 24, rm: 0 })

  testSqrt(
    '92093628036.6480124503328403126750210810151658188780763586760022178450462311',
    '8481236324952480852423.718960437545027',
    { dp: 64, rm: 0 }
  )

  testSqrt(
    '1947605507655512.1474872179815308192647511525219417',
    '3793167213450085186132700081381',
    { dp: 34, rm: 1 }
  )

  testSqrt(
    '557716086077.5080956743653150675842959387446784555727262266063122593621607958161147001199667165261203780317',
    '311047232669614419511648.6130023664452767398438696',
    { dp: 94, rm: 2 }
  )

  testSqrt(
    '3.6766253682232922013',
    '13.517574098263058968167681315043395710343763189956497798543',
    { dp: 19, rm: 0 }
  )

  testSqrt(
    '374863740368.0156985152529892838083189109926642299794',
    '140522823842699082383715.919571886197001394994582',
    { dp: 40, rm: 1 }
  )

  testSqrt(
    '3039991938095044282.834999396730197828406224765246402870200714765906547758763203772',
    '9241550983682863551151813316288949279.9625949439074666',
    { dp: 63, rm: 0 }
  )

  testSqrt('948722.35086770259132293410301310241', '900074099035.9401838348750892', {
    dp: 29,
    rm: 1
  })

  testSqrt(
    '23603002885797536.790280728725364655699852314300322649',
    '557101745226966849549415425061219.969394346783798760227',
    { dp: 36, rm: 0 }
  )

  testSqrt('247788926631.668855265587728589', '61399352161274570866824.398764295216033428917127', {
    dp: 18,
    rm: 0
  })

  testSqrt('5.8309518948453004', '34', { dp: 16, rm: 0 })

  testSqrt('756731558.25262830674557663857258007802853198', '572642651255450988.3807853', {
    dp: 35,
    rm: 0
  })

  testSqrt('315.35186696767786854256245741213', '99446.8', { dp: 29, rm: 0 })

  testSqrt(
    '21743622919.6152043904934006640996008653',
    '472785137670415625131.3819412384141603569725008109774351813892945',
    { dp: 28, rm: 0 }
  )

  testSqrt(
    '9931.93848832625073050157085444478223645326098496189725178399175',
    '98643402.13589633051811977376659116574508796',
    { dp: 59, rm: 0 }
  )

  testSqrt(
    '12491945070243173325.00123703924746770276608629177675',
    '156048691637972720536868554818649758614',
    { dp: 32, rm: 2 }
  )

  testSqrt(
    '1.986294948124507296707366989944167364007457',
    '3.94536762094493913289346223994950919328456012507449654266826',
    { dp: 42, rm: 1 }
  )

  testSqrt(
    '1854467167302463060.67001538852537388423828924920448451675904798181668319798201139',
    '3439048474602821519577229021879982239.2082',
    { dp: 62, rm: 2 }
  )

  testSqrt(
    '2088927.797138422758659686170900239830365738839263869523289',
    '4363619341657.58350562244267149496471405124',
    { dp: 51, rm: 0 }
  )

  testSqrt(
    '90061141477839967.2682846126818450599184988316687847204716382695549492605718861',
    '8111009204291506563499764980695382.1759246268375',
    { dp: 61, rm: 2 }
  )

  testSqrt('1476747291384.9099630858', '2180782562612668171679967.63324', {
    dp: 10,
    rm: 2
  })

  testSqrt(
    '9210807993.639856342437524083401141956511342156180578284602614905116773271331676341823693120447',
    '84838983895699875876',
    { dp: 84, rm: 2 }
  )

  testSqrt('3.37200237247840619012635848', '11.3704', { dp: 26, rm: 2 })

  testSqrt('2693874.2163861651089144', '7256958293710.1751161960', {
    dp: 16,
    rm: 1
  })

  testSqrt(
    '5732941347.55256238286493674720703619067740838113000509955135586822000095629002988639',
    '32866616494477789872.3518055761631860371',
    { dp: 74, rm: 2 }
  )

  testSqrt('16288419988283588.674', '265312625714716342994884296792766', {
    dp: 4,
    rm: 2
  })

  testSqrt('365543004.8061649872764474380277913079084143042', '133621688362719958.9872107366', {
    dp: 37,
    rm: 1
  })

  testSqrt(
    '12782418240925459479.2031797451385115697726882124289981424172567856909899486963994',
    '163390216085943917855551726128161143915.02664633',
    { dp: 61, rm: 1 }
  )

  testSqrt('12.07324881148295353275508188921102928327377', '145.76333686397455005144032806105', {
    dp: 43,
    rm: 1
  })

  testSqrt(
    '29.6490992649274348544759045400715775766925',
    '879.06908722152055781935911221883768070437',
    { dp: 40, rm: 1 }
  )

  testSqrt(
    '4.666365343768356140513396346961342877525930132228624',
    '21.7749655215223685799362730400310696',
    { dp: 51, rm: 2 }
  )

  testSqrt('17.122151356727858418696401754969183602519558', '293.168067082697642757847', {
    dp: 42,
    rm: 0
  })

  testSqrt(
    '109652272385643.1603769184581163062699906986',
    '12023620839335281581899617727.8772961473185586727206798164',
    { dp: 29, rm: 2 }
  )

  testSqrt(
    '13489.123629030538320414969169194877155101718802208604977345597134035561855309153297129880622467',
    '181956456.27927',
    { dp: 90, rm: 2 }
  )

  testSqrt('2.372129844675455365912878765809140727257324413647', '5.627', {
    dp: 48,
    rm: 1
  })

  testSqrt(
    '739871537758100310.43883822919081011754036378492392360075543',
    '547409892384536053343836850938988791.2508666160979',
    { dp: 41, rm: 0 }
  )

  testSqrt(
    '77140.793792105688747751462443855549841986175279935245610391',
    '5950702066.8761715670568717062071879678486494595966218026',
    { dp: 54, rm: 0 }
  )

  testSqrt(
    '162820594803834668.752129825654424512211529624619694188452350414129430986701621110932095616631076098099130503248',
    '26510546092274513134180208644185957.57422670990654',
    { dp: 93, rm: 0 }
  )

  testSqrt(
    '939333.959604513485668563847772506141997730133849933463092593953521840168273751255714815246',
    '882348287666.2937728893202363',
    { dp: 84, rm: 0 }
  )

  testSqrt('4.568369512', '20.87', { dp: 9, rm: 1 })

  testSqrt(
    '370.818280526354041083927163168590728498008550586626184882319882834674931772525681078764889',
    '137506.1971725218006486309891482928119051089854653',
    { dp: 87, rm: 1 }
  )

  testSqrt(
    '459260874.20127731126343992531130965108732',
    '210920550572121463.814947484719373265508800614967431627085952061224891',
    { dp: 32, rm: 1 }
  )

  testSqrt(
    '34146881023818508.954756503743080316053431668549275132795068',
    '1166009483654816582318330803409852.007911',
    { dp: 43, rm: 1 }
  )

  testSqrt(
    '411369926586282.35173941504630680193130958',
    '169225216499603331644025273726.130552532747109702369176231397148094894',
    { dp: 26, rm: 2 }
  )

  testSqrt('146.837594711181641908188613240193044745216301', '21561.27922056523889531529752', {
    dp: 42,
    rm: 1
  })

  testSqrt(
    '2436.80241424922206290898076140846108744470830585565672963845308477988719476570192112',
    '5938006.00609083724509944',
    { dp: 80, rm: 0 }
  )

  testSqrt(
    '5968940791314695.9391845388865719907476112181090409748506',
    '35628254170220508537420332407309.79446040',
    { dp: 40, rm: 0 }
  )

  testSqrt('7757883860673599094.299765297', '60184761995699906684011270143497832606.405945309948', {
    dp: 9,
    rm: 2
  })

  testSqrt('2.2181073012818834324103200205219865836926753', '4.92', {
    dp: 43,
    rm: 2
  })

  testSqrt(
    '910.9629520458008175934592151820959436914447449057963517034109551518362704397',
    '829853.5',
    { dp: 73, rm: 1 }
  )

  testSqrt(
    '4.242640687119285146405066172629094235709015626130844219530039213972197435386321117',
    '18',
    { dp: 81, rm: 2 }
  )

  testSqrt('1259229966702.622212273094', '1585660109041887045436663.9', {
    dp: 12,
    rm: 1
  })

  testSqrt('163.04833062468649267909332731', '26584.7581194970792', {
    dp: 26,
    rm: 0
  })

  testSqrt(
    '4204818551811.1334068235516094940662770670832347987097641633616076970760141535',
    '17680499053655077194352936.9862782964932',
    { dp: 64, rm: 2 }
  )

  testSqrt('39405180.06334322', '1552768215824502', { dp: 9, rm: 1 })

  testSqrt('11019819.18', '121436414839837.12468', { dp: 2, rm: 2 })

  testSqrt('2.7666477911002694164386944265228742439351110337', '7.65434', {
    dp: 46,
    rm: 0
  })

  testSqrt('79.8964796181302813829514', '6383.4474553703074736391804543616', {
    dp: 22,
    rm: 1
  })

  testSqrt(
    '256884.8986204117896931254014585418288760261941990857711922965396545498637125556442506103725098664222399',
    '65989851139.2192430115427289',
    { dp: 97, rm: 1 }
  )

  testSqrt('51576.16987553369007338491641136', '2660101299.0299088953962881552848995811', {
    dp: 26,
    rm: 1
  })

  testSqrt(
    '83117929425.537107714299371091957543379566',
    '6908590191988567392806.80486418318444628',
    { dp: 30, rm: 1 }
  )

  testSqrt(
    '65772725.59339738278078887228018658173869609912689',
    '4326051431984351.09884157745017974',
    { dp: 41, rm: 0 }
  )

  testSqrt(
    '353254.68729598168174020062443678572940775163547873542847911555211434402472387360698376451692274187949171',
    '124788874096.581801769341529731',
    { dp: 98, rm: 0 }
  )

  testSqrt(
    '4710250560799.345071943574342121547002',
    '22186460345510544746149875.21079977475782182108767576173806601062569351',
    { dp: 24, rm: 0 }
  )

  testSqrt(
    '1922328.5814452710447231491355356265501994748371717620744762610836',
    '3695347175041.3880723243439344',
    { dp: 58, rm: 0 }
  )

  testSqrt('89116010281422470.490792878028479', '7941663288478595468163012949770631.031610', {
    dp: 15,
    rm: 1
  })

  testSqrt(
    '893056745827291.2797429722245393357197289561968389609411292397482876045',
    '797550351267631140592697284483.78129',
    { dp: 55, rm: 1 }
  )

  testSqrt(
    '776.5090582120990070056744810742483620827196187879468568581488531077672537925651203290541573461',
    '602966.31748544096431040937268',
    { dp: 91, rm: 0 }
  )

  testSqrt(
    '2995751.634073306004244447026435588871407905052680216908898588671550117511803869048557530431723092132',
    '8974527853052.88312',
    { dp: 93, rm: 0 }
  )

  testSqrt(
    '10256041108976420629.199454567907275476',
    '105186379229014287888491059604397048384.620569192314',
    { dp: 18, rm: 1 }
  )

  testSqrt('1668.6764282929150311920750595338744', '2784481.0223404', {
    dp: 31,
    rm: 1
  })

  testSqrt(
    '10.2385664037012525496880466372434589015640964461096948083431020419951',
    '104.828242003',
    { dp: 67, rm: 0 }
  )

  testSqrt(
    '68651941131739807.174750106032127662294695087292808832370099322483965602512157211426100868174677659683',
    '4713089021155867956380018732563084.26698833111',
    { dp: 84, rm: 0 }
  )

  testSqrt(
    '2119642072.680265413658964490823',
    '4492882516276291566.29881022242536487557872701343389871875',
    { dp: 21, rm: 2 }
  )

  testSqrt(
    '295414.57241487468020923791493376733960197400575508671338810222236013093392808359746725949898886883126268',
    '87269769595.06323634741877845138',
    { dp: 98, rm: 2 }
  )

  testSqrt('37516617.579099132622513300879884121967683', '1407496594576370.06261787957718', {
    dp: 33,
    rm: 2
  })

  testSqrt('1770073.1489207444615594580039659422', '3133158952530.2', {
    dp: 28,
    rm: 1
  })

  testSqrt(
    '2062559182194.651333939625538780888106868996091400331597659659567648164339407129332825200701125200486512',
    '4254150380055468916249334.9191129113190464726018607977',
    { dp: 90, rm: 1 }
  )

  testSqrt('12.07145393', '145.72', { dp: 8, rm: 1 })

  testSqrt(
    '25034434221195.1626546646428355078518084227214031163523557198228259498967796293623093732280578488089414910009545',
    '626722896775347450122233568.221736229089870371148583168',
    { dp: 97, rm: 1 }
  )

  testSqrt(
    '1369370604956.05098382437442746815592765507526977434916820834002',
    '1875175853717701043262789.163',
    { dp: 50, rm: 1 }
  )

  testSqrt(
    '61111046097989.562614478991002463202122550327564207016373610481385147575687339517642575745',
    '3734559955190605346508566151.747128467087991987800252614000906073017',
    { dp: 75, rm: 1 }
  )

  testSqrt(
    '487839154280.605258799',
    '237987040449216180199565.97996551897500100835854353148858639128012',
    { dp: 9, rm: 2 }
  )

  testSqrt('3771198.65750627716579658341655388678', '14221939314377.1471847', {
    dp: 30,
    rm: 0
  })

  testSqrt(
    '998223.9287829203446196803384884403292209921824958032442949937536171090461827984654389784946553623',
    '996451011994.8088280477062132',
    { dp: 91, rm: 0 }
  )

  testSqrt(
    '5126338484054822038.6885613203',
    '26279346253101490909404023029363590984.22045482623574089',
    { dp: 10, rm: 1 }
  )

  testSqrt(
    '4435299142639732.0386665272768109416139138688675365733',
    '19671878484700742088824375591214.762823606521949640217195100557734',
    { dp: 37, rm: 0 }
  )

  testSqrt('1840.27953983121746818190253230579', '3386628.78472139752', {
    dp: 29,
    rm: 0
  })

  testSqrt(
    '25034434221195.1626546646428355078518084227214031163523557198228259498967796293623093732280578488089414910009545',
    '626722896775347450122233568.221736229089870371148583168',
    { dp: 97, rm: 1 }
  )
})
