import * as assert from 'assert'
import { parse, RoundingOptions, toFixed } from '../src/Big'
import { pipe } from 'fp-ts/lib/function'

function testToFixed(expected: string, value: string | number, ro: Partial<RoundingOptions> = {}) {
  it(`Big.js test: ${value} to fixed with ${
    ro.dp ?? 'undefined'
  } decimal places using RoundingMode ${ro.rm ?? 'undefined'}`, () => {
    assert.strictEqual(pipe(value, parse, toFixed(ro)), expected)
  })
}

describe('toFixed', () => {
  testToFixed('0.0', 0, { dp: 1, rm: 1 })

  testToFixed('0.0', 0, { dp: 1, rm: 1 })

  testToFixed('0.0', -0, { dp: 1, rm: 1 })

  testToFixed('0.00', -0, { dp: 2, rm: 1 })

  testToFixed('100.0', 99.9512986, { dp: 1, rm: 1 })

  testToFixed('10.0', 9.95036, { dp: 1, rm: 1 })

  testToFixed('1.0', 0.99, { dp: 1, rm: 1 })

  testToFixed('0.10', 0.09906, { dp: 2, rm: 1 })

  testToFixed('0.010', 0.0098034, { dp: 3, rm: 1 })

  testToFixed('1111111111111111111111.00000000', '1111111111111111111111', {
    dp: 8,
    rm: 1
  })

  testToFixed('0.1', 0.1, { dp: 1, rm: 1 })

  testToFixed('0.10', 0.1, { dp: 2, rm: 1 })

  testToFixed('0.100', 0.1, { dp: 3, rm: 1 })

  testToFixed('0.01', 0.01, { dp: 2, rm: 1 })

  testToFixed('0.010', 0.01, { dp: 3, rm: 1 })

  testToFixed('0.0100', 0.01, { dp: 4, rm: 1 })

  testToFixed('0.00', 0.001, { dp: 2, rm: 1 })

  testToFixed('0.001', 0.001, { dp: 3, rm: 1 })

  testToFixed('0.0010', 0.001, { dp: 4, rm: 1 })

  testToFixed('1.0000', 1, { dp: 4, rm: 1 })

  testToFixed('1.0', 1, { dp: 1, rm: 1 })

  testToFixed('1', 1, { dp: 0, rm: 1 })

  testToFixed('12', 12, { dp: 0, rm: 1 })

  testToFixed('1', 1.1, { dp: 0, rm: 1 })

  testToFixed('12', 12.1, { dp: 0, rm: 1 })

  testToFixed('1', 1.12, { dp: 0, rm: 1 })

  testToFixed('12', 12.12, { dp: 0, rm: 1 })

  testToFixed('0.0000006', 0.0000006, { dp: 7, rm: 1 })

  testToFixed('0.00000006', 0.00000006, { dp: 8, rm: 1 })

  testToFixed('0.000000060', 0.00000006, { dp: 9, rm: 1 })

  testToFixed('0.0000000600', 0.00000006, { dp: 10, rm: 1 })

  testToFixed('0', 0, { dp: 0, rm: 1 })

  testToFixed('0.0', 0, { dp: 1, rm: 1 })

  testToFixed('0.00', 0, { dp: 2, rm: 1 })

  testToFixed('-1111111111111111111111.00000000', '-1111111111111111111111', {
    dp: 8,
    rm: 1
  })

  testToFixed('-0.1', -0.1, { dp: 1, rm: 1 })

  testToFixed('-0.10', -0.1, { dp: 2, rm: 1 })

  testToFixed('-0.100', -0.1, { dp: 3, rm: 1 })

  testToFixed('-0.01', -0.01, { dp: 2, rm: 1 })

  testToFixed('-0.010', -0.01, { dp: 3, rm: 1 })

  testToFixed('-0.0100', -0.01, { dp: 4, rm: 1 })

  testToFixed('-0.00', -0.001, { dp: 2, rm: 1 })

  testToFixed('-0.001', -0.001, { dp: 3, rm: 1 })

  testToFixed('-0.0010', -0.001, { dp: 4, rm: 1 })

  testToFixed('-1.0000', -1, { dp: 4, rm: 1 })

  testToFixed('-1.0', -1, { dp: 1, rm: 1 })

  testToFixed('-1', -1, { dp: 0, rm: 1 })

  testToFixed('-1', -1.1, { dp: 0, rm: 1 })

  testToFixed('-12', -12.1, { dp: 0, rm: 1 })

  testToFixed('-1', -1.12, { dp: 0, rm: 1 })

  testToFixed('-12', -12.12, { dp: 0, rm: 1 })

  testToFixed('-0.00000', -0.0000006, { dp: 5, rm: 1 })

  testToFixed('-0.0000006', -0.0000006, { dp: 7, rm: 1 })

  testToFixed('-0.00000006', -0.00000006, { dp: 8, rm: 1 })

  testToFixed('-0.000000060', -0.00000006, { dp: 9, rm: 1 })

  testToFixed('-0.0000000600', -0.00000006, { dp: 10, rm: 1 })

  testToFixed('0', 0, { dp: 0, rm: 1 })

  testToFixed('0', -0, { dp: 0, rm: 1 })

  testToFixed('0.0', -0, { dp: 1, rm: 1 })

  testToFixed('0.00', -0, { dp: 2, rm: 1 })

  testToFixed('0.00', '-0.0', { dp: 2, rm: 1 })

  testToFixed('0.00', '-0.0000', { dp: 2, rm: 1 })

  testToFixed('0.0000', -0, { dp: 4, rm: 1 })

  testToFixed('1000', 1000, { rm: 1 })

  testToFixed('0.00001', 0.00001, { rm: 1 })

  testToFixed('0.00001', 0.00001, { dp: 5, rm: 1 })

  testToFixed('0.00000000000000000010', '0.0000000000000000001', {
    dp: 20,
    rm: 1
  })

  testToFixed('0.00001000000000000', 0.00001, { dp: 17, rm: 1 })

  testToFixed('1.00000000000000000', 1, { dp: 17, rm: 1 })

  testToFixed('1000000000000000128', '1000000000000000128', { rm: 1 })

  testToFixed('100000000000000128.0', '100000000000000128', { dp: 1, rm: 1 })

  testToFixed('10000000000000128.00', '10000000000000128', { dp: 2, rm: 1 })

  testToFixed('10000000000000128.00000000000000000000', '10000000000000128', {
    dp: 20,
    rm: 1
  })

  testToFixed('0', 0, { rm: 1 })

  testToFixed('-42.000', -42, { dp: 3, rm: 1 })

  testToFixed('-1000000000000000128', '-1000000000000000128', { rm: 1 })

  testToFixed('-0.00000000000000000010', '-0.0000000000000000001', {
    dp: 20,
    rm: 1
  })

  testToFixed('0.12312312312312300000', '0.123123123123123', { dp: 20, rm: 1 })

  testToFixed('1', 0.5, { dp: 0, rm: 1 })

  testToFixed('-1', -0.5, { dp: 0, rm: 1 })

  testToFixed('1.3', 1.25, { dp: 1, rm: 1 })

  testToFixed('234.2041', 234.20405, { dp: 4, rm: 1 })

  testToFixed('234.2041', '234.204050000000000000000000000000006', {
    dp: 4,
    rm: 1
  })

  testToFixed('0.3', '0.3', { dp: 1, rm: 0 })

  testToFixed('-200258348374.3', '-200258348374.3595802551014614089785610548492885372322083789', {
    dp: 1,
    rm: 0
  })

  testToFixed(
    '-8996550690041157178188143247448286757711.5580857413',
    '-8996550690041157178188143247448286757711.55808574133329',
    { dp: 10, rm: 0 }
  )

  testToFixed('-3172413669280032477.00', '-3172413669280032477', {
    dp: 2,
    rm: 0
  })

  testToFixed(
    '6547946357820.750067107731812021675',
    '6547946357820.750067107731812021675351468709784004',
    { dp: 21, rm: 0 }
  )

  testToFixed(
    '24188393190716631282750407915133817062572333100239.0000000000000000000',
    '24188393190716631282750407915133817062572333100239',
    { dp: 19, rm: 0 }
  )

  testToFixed(
    '539982361589798324286450574560330534901309503.82000000',
    '539982361589798324286450574560330534901309503.82',
    { dp: 8, rm: 0 }
  )

  testToFixed('829898800701640360552652.0000', '829898800701640360552652', {
    dp: 4,
    rm: 0
  })

  testToFixed('-1585782773394.4', '-1585782773394.44501382110847', {
    dp: 1,
    rm: 0
  })

  testToFixed(
    '-7604844176594943774211951887242195107.399',
    '-7604844176594943774211951887242195107.399576743428669618164',
    { dp: 3, rm: 0 }
  )

  testToFixed('-0.00', '-0.0000000000000005153003506839', { dp: 2, rm: 0 })

  testToFixed('0.000', '0.00003', { dp: 3, rm: 0 })

  testToFixed(
    '-5454249481540317712.560293859013731302',
    '-5454249481540317712.56029385901373130215526009738012974642338',
    { dp: 18, rm: 0 }
  )

  testToFixed(
    '15352607654972198961429295651185206861818141054385638.00000000000000000',
    '15352607654972198961429295651185206861818141054385638',
    { dp: 17, rm: 0 }
  )

  testToFixed('91494535411039025233040.292', '91494535411039025233040.29224903220309368507011', {
    dp: 3,
    rm: 0
  })

  testToFixed('2043369316.0', '2043369316', { dp: 1, rm: 0 })

  testToFixed('-0.0000000782350618457', '-0.0000000782350618457630647420312027682238301541350414', {
    dp: 19,
    rm: 0
  })

  testToFixed('2122652.0', '2122652', { dp: 1, rm: 0 })

  testToFixed('-0.00841365', '-0.00841365099301981489219310202029642', {
    dp: 8,
    rm: 0
  })

  testToFixed('0.0', '0.0007035', { dp: 1, rm: 0 })

  testToFixed('-0.00000000000000374916', '-0.0000000000000037491685778894015479084539735777088', {
    dp: 20,
    rm: 0
  })

  testToFixed('534883638.00', '534883638', { dp: 2, rm: 0 })

  testToFixed('-2.0', '-2', { dp: 1, rm: 0 })

  testToFixed(
    '-5634442247266825358399629799939027370665.0000000000000000000',
    '-5634442247266825358399629799939027370665',
    { dp: 19, rm: 0 }
  )

  testToFixed('3331187169219186569122.000000000', '3331187169219186569122', {
    dp: 9,
    rm: 0
  })

  testToFixed('0.0000000000', '0.0000000000006604395609805032330367635527', {
    dp: 10,
    rm: 0
  })

  testToFixed('-0.0000000000000576901', '-0.00000000000005769013292086168690493327', {
    dp: 19,
    rm: 0
  })

  testToFixed('-661.8', '-661.828596629053201916486', { dp: 1, rm: 0 })

  testToFixed(
    '-6073555395665254434249128854999349235744174928042756.1153000000000',
    '-6073555395665254434249128854999349235744174928042756.1153',
    { dp: 13, rm: 0 }
  )

  testToFixed('-5013086846966.000', '-5013086846966', { dp: 3, rm: 0 })

  testToFixed('0.004015', '0.00401523226833', { dp: 6, rm: 0 })

  testToFixed(
    '3140295374107374579919222510.1462722',
    '3140295374107374579919222510.1462722819395532',
    { dp: 7, rm: 0 }
  )

  testToFixed('-0.000000', '-0.00000000000000799876460379334679831886', {
    dp: 6,
    rm: 0
  })

  testToFixed('-0.00', '-0.0003', { dp: 2, rm: 0 })

  testToFixed('-0.026760766726884267', '-0.026760766726884267750393307117624838556001925491', {
    dp: 18,
    rm: 0
  })

  testToFixed(
    '-20821740502968847857923433558797.0899',
    '-20821740502968847857923433558797.08997487843745',
    { dp: 4, rm: 0 }
  )

  testToFixed('0.00000000002', '0.000000000020346524414696573703092255317751132892', {
    dp: 11,
    rm: 0
  })

  testToFixed('45492073832204366341299301624.000000000', '45492073832204366341299301624', {
    dp: 9,
    rm: 0
  })

  testToFixed(
    '-22166905155222048275755520049666636.000000000000000',
    '-22166905155222048275755520049666636',
    { dp: 15, rm: 0 }
  )

  testToFixed('-0.0047749609085292677147', '-0.00477496090852926771478756451899887586311084', {
    dp: 22,
    rm: 0
  })

  testToFixed(
    '0.0000000000066505751320542',
    '0.000000000006650575132054209449586010993453988006221893652',
    { dp: 25, rm: 0 }
  )

  testToFixed('-5987959.1630276586738', '-5987959.163027658673856586', {
    dp: 13,
    rm: 0
  })

  testToFixed('-1666.00', '-1666', { dp: 2, rm: 0 })

  testToFixed('634686619827216246836355610829.00000', '634686619827216246836355610829', {
    dp: 5,
    rm: 0
  })

  testToFixed(
    '-4775591515709.469953191321103401',
    '-4775591515709.4699531913211034017874029213583522324151968262',
    { dp: 18, rm: 0 }
  )

  testToFixed('-0.00209248872211', '-0.002092488722118037239933953031151990638700454763', {
    dp: 14,
    rm: 0
  })

  testToFixed(
    '4592542353054190400811174084.8269203906',
    '4592542353054190400811174084.826920390637',
    { dp: 10, rm: 0 }
  )

  testToFixed(
    '-2719622410429690231797721788738949434271171.000000000',
    '-2719622410429690231797721788738949434271171',
    { dp: 9, rm: 0 }
  )

  testToFixed(
    '7481081126833353571249877375770446139269602514514.000000000000000',
    '7481081126833353571249877375770446139269602514514',
    { dp: 15, rm: 0 }
  )

  testToFixed(
    '-717308374940.1455264110',
    '-717308374940.145526411005821148802846366045624291352081913',
    { dp: 10, rm: 0 }
  )

  testToFixed('-0.000000007', '-0.000000007385554720977', { dp: 9, rm: 0 })

  testToFixed('-0.000861389378754506340', '-0.000861389378754506340296565696012302905659179798', {
    dp: 21,
    rm: 0
  })

  testToFixed('-5053251493102402525630380749.678', '-5053251493102402525630380749.6785380807585', {
    dp: 3,
    rm: 0
  })

  testToFixed('-4.0', '-4', { dp: 1, rm: 0 })

  testToFixed('-91608.490784509096643367058', '-91608.49078450909664336705884736640894006', {
    dp: 21,
    rm: 0
  })

  testToFixed('0.000', '0.000000008', { dp: 3, rm: 0 })

  testToFixed('-60759551763816025544062865222.0000000000', '-60759551763816025544062865222', {
    dp: 10,
    rm: 0
  })

  testToFixed('1052.9354577213309', '1052.93545772133093448862729794627180236152', {
    dp: 13,
    rm: 0
  })

  testToFixed('45267509474.0', '45267509474', { dp: 1, rm: 0 })

  testToFixed('3157315152.00', '3157315152', { dp: 2, rm: 0 })

  testToFixed(
    '733744593401073823825766410831877679446.0000000000000000000',
    '733744593401073823825766410831877679446',
    { dp: 19, rm: 1 }
  )

  testToFixed('-64.6849459', '-64.6849458687691227978', { dp: 7, rm: 1 })

  testToFixed('-0.000000', '-0.00000000009', { dp: 6, rm: 1 })

  testToFixed(
    '-62537287527837589298857228059657673223234916.95923265430000000',
    '-62537287527837589298857228059657673223234916.9592326543',
    { dp: 17, rm: 1 }
  )

  testToFixed(
    '3393668096256773847245721315080265089731.000000',
    '3393668096256773847245721315080265089731',
    { dp: 6, rm: 1 }
  )

  testToFixed('0.0', '0.0000000000000056674956638008432348702401392', {
    dp: 1,
    rm: 1
  })

  testToFixed('72516372734.6', '72516372734.6447', { dp: 1, rm: 1 })

  testToFixed('-418.28', '-418.2800731793741351', { dp: 2, rm: 1 })

  testToFixed('0.00', '0.001', { dp: 2, rm: 1 })

  testToFixed('8366217346845756726.00000000', '8366217346845756726', {
    dp: 8,
    rm: 1
  })

  testToFixed('-0.000000', '-0.0000000000000092034548636370987112234384736726', { dp: 6, rm: 1 })

  testToFixed('0.35', '0.35474830751442135112334772517193392', {
    dp: 2,
    rm: 1
  })

  testToFixed('64703289793894.5830', '64703289793894.58296866', {
    dp: 4,
    rm: 1
  })

  testToFixed('-0.000000000000000036', '-0.000000000000000036461242408590182363418943891', {
    dp: 18,
    rm: 1
  })

  testToFixed('5494508405056449117588.631948', '5494508405056449117588.631948458033233759999', {
    dp: 6,
    rm: 1
  })

  testToFixed('-0.0', '-0.00393971618499838726739122333520030506235698', {
    dp: 1,
    rm: 1
  })

  testToFixed('375581290738585826632.00000000', '375581290738585826632', {
    dp: 8,
    rm: 1
  })

  testToFixed('254.96635275802300887', '254.96635275802300886544776010389418575738792480979736', {
    dp: 17,
    rm: 1
  })

  testToFixed('21492347.69467571391498624445', '21492347.6946757139149862444482880595559468', {
    dp: 20,
    rm: 1
  })

  testToFixed('313576441324233.0000000', '313576441324233', { dp: 7, rm: 1 })

  testToFixed('-8617.57089319166', '-8617.57089319166205141433276411273552139017', {
    dp: 11,
    rm: 1
  })

  testToFixed(
    '0.00000000014928376395',
    '0.00000000014928376394768755724252424022348932365406839448223',
    { dp: 20, rm: 1 }
  )

  testToFixed(
    '2.497624215622999568569',
    '2.49762421562299956856937732557160934323114203547832675',
    { dp: 21, rm: 1 }
  )

  testToFixed(
    '-288056106511636272271570523193926801058294502.000',
    '-288056106511636272271570523193926801058294502',
    { dp: 3, rm: 1 }
  )

  testToFixed('-4798171567575228724.140', '-4798171567575228724.1400144613946894', { dp: 3, rm: 1 })

  testToFixed('8.49008', '8.49007655210654', { dp: 5, rm: 1 })

  testToFixed('-56633605.000', '-56633605', { dp: 3, rm: 1 })

  testToFixed('-4147381274685866.81753', '-4147381274685866.8175313', {
    dp: 5,
    rm: 1
  })

  testToFixed(
    '-534460490015293367127173277346694900936058.0000',
    '-534460490015293367127173277346694900936058',
    { dp: 4, rm: 1 }
  )

  testToFixed(
    '182707431911537249021116759327712693311898345504618668.43327000000000000000000',
    '182707431911537249021116759327712693311898345504618668.43327',
    { dp: 23, rm: 1 }
  )

  testToFixed(
    '210005324615278.4586839690045963321032',
    '210005324615278.458683969004596332103244549279',
    { dp: 22, rm: 1 }
  )

  testToFixed(
    '779837001772884165637922377221951347134695.644834',
    '779837001772884165637922377221951347134695.6448338',
    { dp: 6, rm: 1 }
  )

  testToFixed('-0.000001', '-0.00000064188301390033596845335767993853284632527964514979079', {
    dp: 6,
    rm: 1
  })

  testToFixed('13.0', '13', { dp: 1, rm: 1 })

  testToFixed('0.0000001269', '0.0000001269060795648365813491128357427111184222', { dp: 10, rm: 1 })

  testToFixed('18446632248354.00', '18446632248354', { dp: 2, rm: 1 })

  testToFixed('-1229249.79', '-1229249.7897249259', { dp: 2, rm: 1 })

  testToFixed('49082.0', '49082', { dp: 1, rm: 1 })

  testToFixed('-61.0', '-61', { dp: 1, rm: 1 })

  testToFixed('-893.0', '-893', { dp: 1, rm: 1 })

  testToFixed('5002282278.56974877690066484', '5002282278.569748776900664839184116538222902', {
    dp: 17,
    rm: 1
  })

  testToFixed('41372.00', '41372', { dp: 2, rm: 1 })

  testToFixed(
    '-4732022445962399687294885123498809.7625585825095',
    '-4732022445962399687294885123498809.7625585825095',
    { dp: 13, rm: 1 }
  )

  testToFixed('-55484242.036895641', '-55484242.036895641', { dp: 9, rm: 1 })

  testToFixed(
    '-41427133134.52583323427907663268339',
    '-41427133134.525833234279076632683393992706825',
    { dp: 23, rm: 1 }
  )

  testToFixed('0.0', '0.00004300614085218825243480119971669264977421', {
    dp: 1,
    rm: 1
  })

  testToFixed(
    '-472025754597316278339412186866.7010659789',
    '-472025754597316278339412186866.701065978877597089729906019843',
    { dp: 10, rm: 1 }
  )

  testToFixed('2.50869', '2.50869082352024406', { dp: 5, rm: 1 })

  testToFixed('-87154.000', '-87154', { dp: 3, rm: 1 })

  testToFixed(
    '-0.0000000000071859183950976',
    '-0.0000000000071859183950975905578927950225183102336392',
    { dp: 25, rm: 1 }
  )

  testToFixed('-10827138340266.44', '-10827138340266.44057558913', {
    dp: 2,
    rm: 1
  })

  testToFixed('0.0000702', '0.0000701871613973530533582225769977', {
    dp: 7,
    rm: 1
  })

  testToFixed(
    '-4878237667448133503521416059497.376626000000',
    '-4878237667448133503521416059497.376626',
    { dp: 12, rm: 1 }
  )

  testToFixed('8984687671347686046766702.01181862480', '8984687671347686046766702.0118186248', {
    dp: 11,
    rm: 1
  })

  testToFixed('0.00000', '0.00000000076447711430809658905538', {
    dp: 5,
    rm: 1
  })

  testToFixed('-184825.87743766370213607', '-184825.87743766370213606656669525883145102', {
    dp: 17,
    rm: 1
  })

  testToFixed(
    '-147007021210433212254058959161555.747000000000',
    '-147007021210433212254058959161555.747',
    { dp: 12, rm: 1 }
  )

  testToFixed(
    '641778680063060681850989295.4',
    '641778680063060681850989295.44394602812788754296411563',
    { dp: 1, rm: 1 }
  )

  testToFixed('0.00', '0.000000000000000261099857', { dp: 2, rm: 1 })

  testToFixed(
    '-6614662975368684488885953285955838893900074215956.00',
    '-6614662975368684488885953285955838893900074215956',
    { dp: 2, rm: 2 }
  )

  testToFixed('8642393776898.000', '8642393776898', { dp: 3, rm: 2 })

  testToFixed('3612207878528.1106344698085142865', '3612207878528.1106344698085142865438924419', {
    dp: 19,
    rm: 2
  })

  testToFixed('977910386.93', '977910386.9343537', { dp: 2, rm: 2 })

  testToFixed(
    '-8937937492688941768401276851642629965923372.0',
    '-8937937492688941768401276851642629965923372',
    { dp: 1, rm: 2 }
  )

  testToFixed(
    '-8327876772303865517454752161.4376112752921904774',
    '-8327876772303865517454752161.43761127529219047742910886',
    { dp: 19, rm: 2 }
  )

  testToFixed('-27707.00', '-27707', { dp: 2, rm: 2 })

  testToFixed(
    '-7287595765894242586375.92700435484',
    '-7287595765894242586375.927004354837723619581861634319',
    { dp: 11, rm: 2 }
  )

  testToFixed('-0.00000', '-0.000000000000023670858459165486137218740358207859', { dp: 5, rm: 2 })

  testToFixed('574676836802209077.64156', '574676836802209077.641563875647945277493356873895', {
    dp: 5,
    rm: 2
  })

  testToFixed(
    '-3041038455237222898218053653661.87952947815',
    '-3041038455237222898218053653661.87952947815',
    { dp: 11, rm: 2 }
  )

  testToFixed('-628244132307.000', '-628244132307', { dp: 3, rm: 2 })

  testToFixed('316566935167341670725238.000', '316566935167341670725238', {
    dp: 3,
    rm: 2
  })

  testToFixed('-77953301569468294124105528.0', '-77953301569468294124105528', {
    dp: 1,
    rm: 2
  })

  testToFixed('0.0046', '0.00460227833968584', { dp: 4, rm: 2 })

  testToFixed('4323265763616518980379929221104.0', '4323265763616518980379929221104', {
    dp: 1,
    rm: 2
  })

  testToFixed(
    '1674500565014237781637959673471730398.1120033',
    '1674500565014237781637959673471730398.1120032995511774',
    { dp: 7, rm: 2 }
  )

  testToFixed('872559441430499650732600166.00000', '872559441430499650732600166', { dp: 5, rm: 2 })

  testToFixed('-87858304.0000', '-87858304', { dp: 4, rm: 2 })

  testToFixed('-4158788.000', '-4158788', { dp: 3, rm: 2 })

  testToFixed('3983930437416823631395.9093', '3983930437416823631395.90934402583657', {
    dp: 4,
    rm: 2
  })

  testToFixed('-14.5531937', '-14.5531936852106573016020290135814233645752955297443336', {
    dp: 7,
    rm: 2
  })

  testToFixed('0.00000000002201', '0.00000000002200503795474854372849141363413146996972', {
    dp: 14,
    rm: 2
  })

  testToFixed('0.0000000000000', '0.00000000000000000894955653982033503846831364474746320232', {
    dp: 13,
    rm: 2
  })

  testToFixed('61564779.00', '61564779', { dp: 2, rm: 2 })

  testToFixed('-7.0', '-7', { dp: 1, rm: 2 })

  testToFixed(
    '-0.000000000000028455976228',
    '-0.00000000000002845597622815028653703372125435938812845106',
    { dp: 24, rm: 2 }
  )

  testToFixed(
    '728982423193598397582409707715766595902844.0000000',
    '728982423193598397582409707715766595902844',
    { dp: 7, rm: 2 }
  )

  testToFixed('14538075860529.2697937480', '14538075860529.269793748', {
    dp: 10,
    rm: 2
  })

  testToFixed('0.000', '0.00000000000000000007021566096', { dp: 3, rm: 2 })

  testToFixed(
    '-5136066535080.86830591678842264063462546263',
    '-5136066535080.86830591678842264063462546262988980471309228558',
    { dp: 29, rm: 2 }
  )

  testToFixed(
    '-3026751112367460839746524832112404665.000000000000000',
    '-3026751112367460839746524832112404665',
    { dp: 15, rm: 2 }
  )

  testToFixed('-6694275398250090562.00', '-6694275398250090562', {
    dp: 2,
    rm: 2
  })

  testToFixed(
    '-50643997750937725516578696636829589244661366402743.000000000',
    '-50643997750937725516578696636829589244661366402743',
    { dp: 9, rm: 2 }
  )

  testToFixed('2197374413.79714', '2197374413.7971355344377249354470626290268959873', {
    dp: 5,
    rm: 2
  })

  testToFixed('0.0', '0.005020192658713355', { dp: 1, rm: 2 })

  testToFixed(
    '-254956356194995318790657817617390203938.180000000',
    '-254956356194995318790657817617390203938.18',
    { dp: 9, rm: 2 }
  )

  testToFixed('0.000', '0.000000000090726', { dp: 3, rm: 2 })

  testToFixed('-644164371869124953225087.14694842524000', '-644164371869124953225087.14694842524', {
    dp: 14,
    rm: 2
  })

  testToFixed('-0.00000157175189018', '-0.0000015717518901763532026126676445445', { dp: 17, rm: 2 })

  testToFixed('883545726717772254369.08868386', '883545726717772254369.0886838593581297250598', {
    dp: 8,
    rm: 2
  })

  testToFixed(
    '-8890332541208932844712909996569216422867971798.000000000000000',
    '-8890332541208932844712909996569216422867971798',
    { dp: 15, rm: 2 }
  )

  testToFixed('-0.000000000000', '-0.000000000000000019481454049470983547912235', { dp: 12, rm: 2 })

  testToFixed('740944636504591431790473918513.0000', '740944636504591431790473918513', {
    dp: 4,
    rm: 2
  })

  testToFixed(
    '-5679793084762496855854965276883350654245022549131067599715.800000',
    '-5679793084762496855854965276883350654245022549131067599715.8',
    { dp: 6, rm: 2 }
  )

  testToFixed('51991398836962962151.4032644162159', '51991398836962962151.4032644162159099221', {
    dp: 13,
    rm: 2
  })

  testToFixed('66958838053011544557752193.00000', '66958838053011544557752193', { dp: 5, rm: 2 })

  testToFixed(
    '-670579843.2118208913941229137016',
    '-670579843.21182089139412291370155773837719883548843299002',
    { dp: 22, rm: 2 }
  )

  testToFixed(
    '-153613650899356538114572207.94248678450152160836',
    '-153613650899356538114572207.9424867845015216083607156497',
    { dp: 20, rm: 2 }
  )

  testToFixed(
    '-737846251706379871052.2861168',
    '-737846251706379871052.2861168267591416289887782899835',
    { dp: 7, rm: 2 }
  )

  testToFixed('-65908055.0', '-65908055', { dp: 1, rm: 2 })

  testToFixed(
    '3237039120306392313.80906374769',
    '3237039120306392313.80906374769434099092272015749692609',
    { dp: 11, rm: 2 }
  )

  testToFixed('83640693821.00', '83640693821', { dp: 2, rm: 2 })

  testToFixed(
    '-52536202527.13891931933498708496518913773517016037224',
    '-5.253620252713891931933498708496518913773517016037224E10',
    { rm: 1 }
  )

  testToFixed(
    '0.0000000000000008761383898703999300297605784533730922',
    '8.761383898703999300297605784533730922E-16',
    { rm: 1 }
  )

  testToFixed('-0.0000000000000000000000000000000000004', '-4E-37', { rm: 1 })

  testToFixed('2832044194940.47654015529986948208', '2.83204419494047654015529986948208E12', {
    rm: 1
  })

  testToFixed('0.00000000000000000000000064668155275864837', '6.4668155275864837E-25', { rm: 1 })

  testToFixed('4.34128088694', '4.34128088694E0', { rm: 1 })

  testToFixed('-851957.6572615611436542', '-8.519576572615611436542E5', {
    rm: 1
  })

  testToFixed(
    '-89097468286.2561077879598798580253771544265682053',
    '-8.90974682862561077879598798580253771544265682053E10',
    { rm: 1 }
  )

  testToFixed('-0.000000000000000000000000000000000000000000000030409767', '-3.0409767E-47', {
    rm: 1
  })

  testToFixed(
    '0.000000000000000000004295112484112357722747956581254',
    '4.295112484112357722747956581254E-21',
    { rm: 1 }
  )

  testToFixed('-839203207475651.6542808578', '-8.392032074756516542808578E14', {
    rm: 1
  })

  testToFixed('-0.00000000000000000078216', '-7.8216E-19', { rm: 1 })

  testToFixed(
    '-1782290274935701247734.21262413032385',
    '-1.78229027493570124773421262413032385E21',
    { rm: 1 }
  )

  testToFixed(
    '31669451104144801337076433457.18511076',
    '3.166945110414480133707643345718511076E28',
    { rm: 1 }
  )

  testToFixed('0.000000000000000000000000000000000000472351852761', '4.72351852761E-37', { rm: 1 })

  testToFixed(
    '-50155220217523568901083623.78842580174913602672593731',
    '-5.015522021752356890108362378842580174913602672593731E25',
    { rm: 1 }
  )

  testToFixed('-291.37', '-2.9137E2', { rm: 1 })

  testToFixed(
    '-52474611936456205886027195352961212383.2279441143',
    '-5.24746119364562058860271953529612123832279441143E37',
    { rm: 1 }
  )

  testToFixed('-326.9376463292543', '-3.269376463292543E2', { rm: 1 })

  testToFixed('0.00000000000044', '4.4E-13', { rm: 1 })

  testToFixed('0.000000087792449', '8.7792449E-8', { rm: 1 })

  testToFixed(
    '497835793870987132484033.938845920610565887398960253648',
    '4.97835793870987132484033938845920610565887398960253648E23',
    { rm: 1 }
  )

  testToFixed('-33960439442302770058.74863962', '-3.396043944230277005874863962E19', { rm: 1 })

  testToFixed(
    '0.00000000000000000000000000000000000000020694696587293782',
    '2.0694696587293782E-40',
    { rm: 1 }
  )

  testToFixed('-0.8904319539', '-8.904319539E-1', { rm: 1 })

  testToFixed('-86429552798.4', '-8.64295527984E10', { rm: 1 })

  testToFixed('0.000000000000000000000000000003', '3E-30', { rm: 1 })

  testToFixed(
    '108595082003321932.8178949736608320767',
    '1.085950820033219328178949736608320767E17',
    { rm: 1 }
  )

  testToFixed(
    '611126.73674534242367484008848341500334',
    '6.1112673674534242367484008848341500334E5',
    { rm: 1 }
  )

  testToFixed('4311.0597590893026685282662406924', '4.3110597590893026685282662406924E3', { rm: 1 })

  testToFixed('0.000000000000000000000000000000000000000073309221', '7.3309221E-41', { rm: 1 })

  testToFixed('-6864844854510.144926572184', '-6.864844854510144926572184E12', {
    rm: 1
  })

  testToFixed('-0.038', '-3.8E-2', { rm: 1 })

  testToFixed('0.00000000000000794946369399591', '7.94946369399591E-15', {
    rm: 1
  })

  testToFixed('56020.6861005', '5.60206861005E4', { rm: 1 })

  testToFixed(
    '-0.00000000000896738912765063552834206018847',
    '-8.96738912765063552834206018847E-12',
    { rm: 1 }
  )

  testToFixed('0.00000000006755925523685348357189087468', '6.755925523685348357189087468E-11', {
    rm: 1
  })

  testToFixed('0.000000000000000000000000000000000072', '7.2E-35', { rm: 1 })

  testToFixed('0.00000000000000000000000000000000000000000000000000006128', '6.128E-53', { rm: 1 })

  testToFixed(
    '-27010668344373144545282.061712584328482438690936897',
    '-2.7010668344373144545282061712584328482438690936897E22',
    { rm: 1 }
  )

  testToFixed('-0.000066720042169954586184178645', '-6.6720042169954586184178645E-5', { rm: 1 })

  testToFixed('-0.00000000000000000000000000000000000003516', '-3.516E-38', {
    rm: 1
  })

  testToFixed('0.007458', '7.458E-3', { rm: 1 })

  testToFixed('0.0670339647456587432138292225', '6.70339647456587432138292225E-2', { rm: 1 })

  testToFixed('-49.59', '-4.959E1', { rm: 1 })

  testToFixed('5.94', '5.94E0', { rm: 1 })

  testToFixed('9185110977234279483303912931774514.67', '9.18511097723427948330391293177451467E33', {
    rm: 1
  })

  testToFixed(
    '-127.11408592808048991219551891022999276273412536879573107525',
    '-1.2711408592808048991219551891022999276273412536879573107525E2',
    { rm: 1 }
  )

  testToFixed('0.00000013', '1.3E-7', { rm: 1 })

  testToFixed('-0.00000000000000000000000000000000156', '-1.56E-33', { rm: 1 })

  testToFixed('22', '2.2E1', { rm: 1 })

  testToFixed('6644378197598065.943168375926', '6.644378197598065943168375926E15', { rm: 1 })

  testToFixed(
    '-0.00000000000000465403429687260725429254606083299909',
    '-4.65403429687260725429254606083299909E-15',
    { rm: 1 }
  )

  testToFixed('0.00000653586429286761580785105', '6.53586429286761580785105E-6', { rm: 1 })

  testToFixed(
    '-779132060.497697052423647343175672388834',
    '-7.79132060497697052423647343175672388834E8',
    { rm: 1 }
  )

  testToFixed(
    '0.0000000000000000085996828590423169591835759758087548466494',
    '8.5996828590423169591835759758087548466494E-18',
    { rm: 1 }
  )

  testToFixed('-0.000000000000256285784', '-2.56285784E-13', { rm: 1 })

  testToFixed('0.0000000000000017947', '1.7947E-15', { rm: 1 })

  testToFixed('5', '5E0', { rm: 1 })

  testToFixed('48309.56', '4.830956E4', { rm: 1 })

  testToFixed(
    '2138.45865823930129961216391905305999251296833471869532168',
    '2.13845865823930129961216391905305999251296833471869532168E3',
    { rm: 1 }
  )

  testToFixed('3706073870.96925990345144', '3.70607387096925990345144E9', {
    rm: 1
  })

  testToFixed('-798.62', '-7.9862E2', { rm: 1 })

  testToFixed('-521968106907526.65373750732297', '-5.2196810690752665373750732297E14', { rm: 1 })

  testToFixed('0.7224996555', '7.224996555E-1', { rm: 1 })

  testToFixed(
    '-0.00000000000059452644215310796452483703709',
    '-5.9452644215310796452483703709E-13',
    { rm: 1 }
  )

  testToFixed(
    '350818063006798017016671125.0434068891113',
    '3.508180630067980170166711250434068891113E26',
    { rm: 1 }
  )

  testToFixed(
    '7968708424180299716816047189442601.3735762244',
    '7.9687084241802997168160471894426013735762244E33',
    { rm: 1 }
  )

  testToFixed(
    '-0.5355520816318664361284739093852209293628562271329701',
    '-5.355520816318664361284739093852209293628562271329701E-1',
    { rm: 1 }
  )

  testToFixed('-906.9275233025623299867798', '-9.069275233025623299867798E2', {
    rm: 1
  })

  testToFixed('0.00045587', '4.5587E-4', { rm: 1 })

  testToFixed('0.000004', '4E-6', { rm: 1 })

  testToFixed('5857276704537340524.1431417907437', '5.8572767045373405241431417907437E18', {
    rm: 1
  })

  testToFixed('-3843554476637626791.87474208180361', '-3.84355447663762679187474208180361E18', {
    rm: 1
  })

  testToFixed(
    '-60535943484683045495384222.313768035329647860053456457477',
    '-6.0535943484683045495384222313768035329647860053456457477E25',
    { rm: 1 }
  )

  testToFixed(
    '0.0000000000000004444869762788836674404079577885262473',
    '4.444869762788836674404079577885262473E-16',
    { rm: 1 }
  )

  testToFixed(
    '-0.005874931444844844350595746989373586841269114316',
    '-5.874931444844844350595746989373586841269114316E-3',
    { rm: 1 }
  )

  testToFixed('0.09', '9E-2', { rm: 1 })

  testToFixed('86280010336.8017418950328178', '8.62800103368017418950328178E10', { rm: 1 })

  testToFixed(
    '227901.6305936588696902705189877626178015851261755',
    '2.279016305936588696902705189877626178015851261755E5',
    { rm: 1 }
  )

  testToFixed('-0.00002923', '-2.923E-5', { rm: 1 })

  testToFixed('451.1251729802129507', '4.511251729802129507E2', { rm: 1 })

  testToFixed(
    '-2586077212890917651232310958.88201646914374247083',
    '-2.58607721289091765123231095888201646914374247083E27',
    { rm: 1 }
  )

  testToFixed('-0.08', '-8E-2', { rm: 1 })

  testToFixed(
    '7.996020827302694833122463304879649129610781362',
    '7.996020827302694833122463304879649129610781362E0',
    { rm: 1 }
  )

  testToFixed(
    '-0.00000000000000000000000007933204829049175909186498799838',
    '-7.933204829049175909186498799838E-26',
    { rm: 1 }
  )

  testToFixed(
    '-0.0000000000001882498592930501880542338117957263473489255',
    '-1.882498592930501880542338117957263473489255E-13',
    { rm: 1 }
  )

  testToFixed(
    '-1172052648945437104144.7753679481957698417677',
    '-1.1720526489454371041447753679481957698417677E21',
    { rm: 1 }
  )

  testToFixed('287937985683292603.441526238031', '2.87937985683292603441526238031E17', { rm: 1 })

  testToFixed(
    '-0.0000000000134355091714731837192225455005',
    '-1.34355091714731837192225455005E-11',
    { rm: 1 }
  )

  testToFixed(
    '0.000000000000000000000000000026170541344981279884209612',
    '2.6170541344981279884209612E-29',
    { rm: 1 }
  )

  testToFixed('0.0041336403', '4.1336403E-3', { rm: 1 })

  testToFixed(
    '8955011.51436146124079765380599870608206410057',
    '8.95501151436146124079765380599870608206410057E6',
    { rm: 1 }
  )

  testToFixed('76343535604093', '7.6343535604093E13', { rm: 1 })

  testToFixed('-579109804573982925.9', '-5.791098045739829259E17', { rm: 1 })

  testToFixed(
    '-16248730541202.41645330499728414237866592099124270393892244',
    '-1.624873054120241645330499728414237866592099124270393892244E13',
    { rm: 1 }
  )

  testToFixed(
    '299078130777696473774921407.8921386301',
    '2.990781307776964737749214078921386301E26',
    { rm: 1 }
  )

  testToFixed('0.00000000000005008659860139108', '5.008659860139108E-14', {
    rm: 1
  })

  testToFixed('-277409247924.47', '-2.7740924792447E11', { rm: 1 })

  testToFixed('-0.516', '-5.16E-1', { rm: 1 })

  testToFixed(
    '-0.0000000000000000000000056338952424532568447556',
    '-5.6338952424532568447556E-24',
    { rm: 1 }
  )

  testToFixed('-0.000000217955', '-2.17955E-7', { rm: 1 })

  testToFixed(
    '8905335075021645253458124.63415988932826552',
    '8.90533507502164525345812463415988932826552E24',
    { rm: 1 }
  )

  testToFixed('-0.0044', '-4.4E-3', { rm: 1 })

  testToFixed('-0.2373963', '-2.373963E-1', { rm: 1 })

  testToFixed('-0.79088027341157244765444311372339', '-7.9088027341157244765444311372339E-1', {
    rm: 1
  })

  testToFixed('0.0026', '2.6E-3', { rm: 1 })

  testToFixed('-835918193339364260673226.934', '-8.35918193339364260673226934E23', { rm: 1 })

  testToFixed('-0.0009', '-9E-4', { rm: 1 })

  testToFixed('6', '6E0', { rm: 1 })

  testToFixed(
    '-314214420212243283843403549.4470864901529365489404218274',
    '-3.142144202122432838434035494470864901529365489404218274E26',
    { rm: 1 }
  )

  testToFixed('0.00000000791545594251', '7.91545594251E-9', { rm: 1 })

  testToFixed(
    '191942230233.90984962570015373025283255557',
    '1.9194223023390984962570015373025283255557E11',
    { rm: 1 }
  )

  testToFixed('-0.0000000000078881545375574067765343323', '-7.8881545375574067765343323E-12', {
    rm: 1
  })

  testToFixed('-16802261058.36705', '-1.680226105836705E10', { rm: 1 })

  testToFixed(
    '0.0000000000000056017241520290338574647512149076190238',
    '5.6017241520290338574647512149076190238E-15',
    { rm: 1 }
  )

  testToFixed('-0.00000000003763962', '-3.763962E-11', { rm: 1 })

  testToFixed('-0.000000000511737717217408462541465239', '-5.11737717217408462541465239E-10', {
    rm: 1
  })

  testToFixed('-0.000000000000000000000000000000000000000050368224614', '-5.0368224614E-41', {
    rm: 1
  })

  testToFixed('-0.018634708832478724474964945976701', '-1.8634708832478724474964945976701E-2', {
    rm: 1
  })
})
